<main class="container">
  <h1>三目並べ</h1>
  <p class="subtitle">エージェントを切り替えて対戦</p>

  <section class="agents" aria-label="player agent settings">
    <div class="agent-row">
      <span class="label">X</span>
      <div class="agent-buttons">
        <button
          type="button"
          class="agent-toggle"
          [ngClass]="{ active: agents.X === 'HUMAN' }"
          (click)="setAgent('X', 'HUMAN')"
        >
          ヒューマン
        </button>
        <button
          type="button"
          class="agent-toggle"
          [ngClass]="{ active: agents.X === 'RANDOM' }"
          (click)="setAgent('X', 'RANDOM')"
        >
          ランダム
        </button>
        <button
          type="button"
          class="agent-toggle"
          [ngClass]="{ active: agents.X === 'MONTE_CARLO' }"
          (click)="setAgent('X', 'MONTE_CARLO')"
        >
          モンテカルロ
        </button>
        <button
          type="button"
          class="agent-toggle"
          [ngClass]="{ active: agents.X === 'MINIMAX' }"
          (click)="setAgent('X', 'MINIMAX')"
        >
          ミニマックス
        </button>
      </div>
    </div>

    <div class="agent-row">
      <span class="label">O</span>
      <div class="agent-buttons">
        <button
          type="button"
          class="agent-toggle"
          [ngClass]="{ active: agents.O === 'HUMAN' }"
          (click)="setAgent('O', 'HUMAN')"
        >
          ヒューマン
        </button>
        <button
          type="button"
          class="agent-toggle"
          [ngClass]="{ active: agents.O === 'RANDOM' }"
          (click)="setAgent('O', 'RANDOM')"
        >
          ランダム
        </button>
        <button
          type="button"
          class="agent-toggle"
          [ngClass]="{ active: agents.O === 'MONTE_CARLO' }"
          (click)="setAgent('O', 'MONTE_CARLO')"
        >
          モンテカルロ
        </button>
        <button
          type="button"
          class="agent-toggle"
          [ngClass]="{ active: agents.O === 'MINIMAX' }"
          (click)="setAgent('O', 'MINIMAX')"
        >
          ミニマックス
        </button>
      </div>
    </div>

    <p class="mode">{{ modeText }}</p>
  </section>

  <section class="status" [ngClass]="{ finished: winner !== null, thinking: isAgentThinking }">
    {{ statusText }}
  </section>

  <section class="board" aria-label="tic tac toe board">
    @for (cell of board; track $index) {
      <button
        class="cell"
        [ngClass]="{ x: cell === 'X', o: cell === 'O' }"
        (click)="play($index)"
        [disabled]="cell !== null || winner !== null || isCurrentPlayerRandom"
        [attr.aria-label]="'マス ' + ($index + 1)"
      >
        {{ cell }}
      </button>
    }
  </section>

  <button class="reset" type="button" (click)="reset()">リセット</button>
</main>
