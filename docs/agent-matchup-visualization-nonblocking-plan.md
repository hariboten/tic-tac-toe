# エージェント対戦表 改善計画（非ブロッキング・進捗表示・引き分け考慮）

## 課題
- 対戦数を増やすと、総当たり計算が単一処理で走りUI応答性が低下する。
- 対戦の進行状況が見えず、完了までの待ち時間が不透明。
- 引き分けが勝率に反映されず、実力評価として情報不足。

## 改善方針
1. **非ブロッキング化**
   - 総当たり計算をチャンク分割し、`setTimeout(..., 0)` でイベントループに処理を返す。
   - 1チャンクあたりの対局数を制限してメインスレッド占有を緩和する。
2. **進捗表示**
   - 全体の総対局数に対する完了数を管理し、%表示する。
   - 実行中メッセージを「進捗 xx%（完了/総数）」形式で更新する。
3. **引き分けの扱い改善**
   - セルごとに `勝/敗/分` を集計する。
   - 表示は「勝率」と「引き分け率」を併記し、さらに評価用に
     `スコア率 = (勝 + 0.5 * 分) / 総数` を算出する。
   - 行平均はスコア率平均を採用する。

## 影響範囲
- `src/app/app.component.ts`: 対戦処理のチャンク実行と進捗管理、集計ロジック更新。
- `src/app/app.component.html`: 勝率セル表示を勝/分対応に変更、進捗表示を追加。
- `src/app/app.component.scss`: セル内2行表示のスタイル補助。
- `src/app/app.component.spec.ts`: 進捗表示と引き分け率表示の検証を追加。
